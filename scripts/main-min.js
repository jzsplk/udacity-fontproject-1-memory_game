function shuffle(e){for(var a=e.length,t,n;0!=a;)n=Math.floor(Math.random()*a),a-=1,t=e[a],e[a]=e[n],e[n]=t;return e}function initGame(){var e=shuffle(symbols);$deck.empty(),match=0,moves=0,$movesNumber.html(moves),$ratingStars.removeClass("fa-star-o").addClass("fa-star");for(var a=0;a<e.length;a++)$deck.append($('<li class="card"><img src="images/icons/'+e[a]+'.png"></img></li>'))}function endGame(e,a){swal({position:"center",type:"success",title:"Happy Birthday 大头！！",text:"用了 "+e+" 步,得到 "+a+"星，  Winner Winner Chicken Dinner!",confirmButtonColor:"#9bcb3c",confirmButtonText:"再来一局"}).then(function(e){e&&initGame()})}function ratingStars(e){var a=3;return e>rant3stars&&e<rant2stars?($ratingStars.eq(2).removeClass("fa-star").addClass("fa-star-o"),a=2):e>rant2stars&&e<rant1stars?($ratingStars.eq(1).removeClass("fa-star").addClass("fa-star-o"),a=1):e>rant1stars&&($ratingStars.eq(0).removeClass("fa-star").addClass("fa-star-o"),a=0),console.log(e),console.log(a),{score:a}}!function($){$(document).ready(function(){console.log("game working"),initGame()})}(jQuery);var symbols=["11","1511","30551","4474349","50982","50983","695118","78182","11","1511","30551","4474349","50982","50983","695118","78182"],$deck=$(".deck"),$scorePanel=$(".score-panel"),$movesNumber=$scorePanel.find(".moves"),$ratingStars=$scorePanel.find("i"),$restart=$scorePanel.find(".restart"),opened=[],delay=800,match=0,moves=0,cardsToMatch=symbols.length/2,rant3stars=cardsToMatch+7,rant2stars=cardsToMatch+9,rant1stars=cardsToMatch+11;$restart.on("click",function(){swal({title:"亲，确定要退出么？",text:"你的记忆会丢失哦！",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"不，哥从头再来"}).then(function(e){e.value&&(swal("重新开始了","GG GL","success"),initGame())})}),$deck.on("click",'.card:not(".match, .open")',function(){var e=$(this),a=e.context.innerHTML;if(e.addClass("open show"),opened.push(a),console.log(opened),opened.length>1&&(a==opened[0]?($deck.find(".open").addClass("match flipInX"),setTimeout(function(){$deck.find(".match").removeClass("open show flipInX")},delay),match++):($deck.find(".open").addClass("notmatch wobble"),setTimeout(function(){$deck.find(".open").removeClass("open show notmatch wobble")},delay)),opened=[],moves++,ratingStars(moves),$movesNumber.html(moves)),match===cardsToMatch){ratingStars(moves);var t=ratingStars(moves).score;setTimeout(function(){endGame(moves,t)},500)}});